<Window x:Class="VisionCalibrationTool.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:VisionCalibrationTool"
        xmlns:viewModels="clr-namespace:VisionCalibrationTool.ViewModels"
        Title="工业视觉标定系统" Height="800" Width="1200">

    <Window.DataContext>
        <viewModels:MainViewModel/>
    </Window.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- 左侧控制面板 -->
        <StackPanel Grid.Column="0" Margin="10">
            <!-- 标定模式选择 -->
            <GroupBox Header="标定模式">
                <ComboBox ItemsSource="{Binding CalibrationModes}" 
                          SelectedItem="{Binding SelectedMode}"
                          Margin="5"/>
            </GroupBox>

            <!-- 标定板生成 -->
            <GroupBox Header="标定板生成" Margin="0,10">
                <Button Content="生成棋盘格" 
                        Command="{Binding GenerateCalibrationPlateCommand}"
                        Margin="5"/>
            </GroupBox>

            <!-- 标定操作 -->
            <GroupBox Header="标定操作" Margin="0,10">
                <Button Content="开始标定" 
                        Command="{Binding RunCalibrationCommand}"
                        Margin="5"/>
                <TextBlock Text="{Binding CalibrationResult.ReprojectionError, 
                    StringFormat='标定误差: {0:F3}像素'}" 
                    Margin="5"/>
            </GroupBox>

            <!-- 识别开关 -->
            <GroupBox Header="识别模块" Margin="0,10">
                <CheckBox Content="启用实时识别" 
                          IsChecked="{Binding IsRecognitionEnabled}" 
                          Margin="5"/>
            </GroupBox>
        </StackPanel>

        <!-- 右侧图像与结果 -->
        <TabControl Grid.Column="1">
            <!-- 实时图像显示 -->
            <TabItem Header="实时画面">
                <Image x:Name="LiveImageDisplay" Stretch="Uniform"/>
            </TabItem>

            <!-- 识别结果展示 -->
            <TabItem Header="识别结果">
                <DataGrid ItemsSource="{Binding RecognitionResults}" 
                          AutoGenerateColumns="False"
                          CanUserAddRows="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="X坐标" Binding="{Binding CenterX, StringFormat={}{0:F2}}"/>
                        <DataGridTextColumn Header="Y坐标" Binding="{Binding CenterY, StringFormat={}{0:F2}}"/>
                        <DataGridTextColumn Header="宽度" Binding="{Binding Width, StringFormat={}{0:F2}}"/>
                        <DataGridTextColumn Header="高度" Binding="{Binding Height, StringFormat={}{0:F2}}"/>
                        <DataGridTextColumn Header="角度" Binding="{Binding Angle, StringFormat={}{0:F1}°}"/>
                        <DataGridTextColumn Header="置信度" Binding="{Binding Confidence, StringFormat={}{0:P0}}"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>